[gd_scene load_steps=9 format=3 uid="uid://8qenmb70an6a"]

[ext_resource type="PhysicsMaterial" uid="uid://dioc2dlho64fc" path="res://car_physic_material/car_physic.tres" id="1_xsx2t"]
[ext_resource type="ArrayMesh" uid="uid://d2jve6ncou77a" path="res://Cars/toreto/toreto_body.obj" id="1_yvtuk"]
[ext_resource type="Script" uid="uid://dn8cru75adetk" path="res://player_controller/player_controller.gd" id="2_c0lmv"]
[ext_resource type="ArrayMesh" uid="uid://cr77eiokivfeo" path="res://Cars/toreto/toreto_wheel.obj" id="2_xsx2t"]
[ext_resource type="ArrayMesh" uid="uid://c0a2j440bttm3" path="res://Cars/toreto/toreto_rear_wheel.obj" id="3_c0lmv"]
[ext_resource type="PackedScene" uid="uid://1d1e5ll020cp" path="res://huds/on_race_huds/race_hud.tscn" id="6_lwgyu"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_ka8i3"]
points = PackedVector3Array(0.92342, -0.0347119, -1.34303, 0.914743, -0.0651863, -1.49647, 0.92342, 0.178406, -1.34549, 0.922878, -0.0398754, -1.19402, 0.922335, -0.081284, -1.04993, 0.921251, -0.249247, -0.932395, 0.902811, -0.235276, -1.67696, 0.914743, 0.175267, -1.49647, 0.899015, 0.150058, -1.76302, 0.901365, 0.23247, -1.34599, 0.901003, 0.237633, -1.26337, 0.922878, 0.183873, -1.25009, 0.892687, 0.229736, -1.49647, 0.921431, -0.148915, -0.956493, 0.922335, 0.188935, -1.16107, 0.920708, 0.182962, -0.924035, 0.917997, 0.158258, -0.718961, 0.917997, -0.248235, -0.718469, 0.83538, -0.433409, -0.718469, 0.836827, -0.433409, -0.807974, 0.838092, -0.433409, -0.888626, 0.834477, -0.374789, -1.71777, 0.899015, -0.234263, -1.73007, 0.902811, 0.165751, -1.69761, 0.906788, 0.17304, -1.62975, 0.87696, 0.202704, -1.76744, 0.880937, 0.219612, -1.70007, 0.800309, -0.174327, -2.52381, 0.800309, -0.0410903, -2.51348, 0.79344, 0.0418283, -2.5066, 0.611214, 0.554425, -0.626997, 0.900461, 0.242392, -1.18222, 0.608864, 0.566574, -0.448971, 0.884733, 0.226193, -1.6322, 0.611757, 0.547642, -0.710109, 0.899196, 0.243101, -0.967804, 0.883468, 0.132239, 1.43899, 0.799044, -0.439889, 1.16113, 0.883468, -0.0234739, 1.42128, 0.882022, -0.240135, 1.22998, -0.838273, -0.433409, -0.888626, -0.834657, -0.374789, -1.71777, 0.748064, -0.318397, -2.43529, 0.804106, -0.208345, -2.48053, 0.742641, 0.148539, -2.51446, 0.835923, 0.262944, -1.6327, 0.718778, 0.183367, -2.4343, 0.455202, -0.286302, -2.53709, 0.461348, -0.279418, -2.54004, 0.466049, -0.271622, -2.54348, 0.46876, -0.263118, -2.54741, 0.469845, -0.254309, -2.55184, 0.46876, -0.245501, -2.55577, 0.466049, -0.237098, -2.55971, 0.780604, -0.0931295, -2.55528, 0.787474, -0.0511134, -2.54348, 0.588075, 0.586215, -0.44848, 0.628931, 0.554121, 0.369849, 0.613384, 0.534379, -0.814367, 0.586448, 0.563435, -0.716502, 0.861413, 0.185189, 1.44489, 0.867198, 0.12171, 1.72717, 0.867198, -0.0144632, 1.73209, -0.799225, -0.439889, 1.16113, 0.80519, -0.36102, 1.99815, 0.793078, -0.357477, 2.09503, 0.762346, -0.345935, 2.2524, 0.860147, -0.0476711, 1.85356, 0.850385, -0.233149, 1.96175, -0.837008, -0.433409, -0.807974, -0.921431, -0.249247, -0.932395, -0.902992, -0.235276, -1.67696, -0.899196, -0.234263, -1.73007, -0.804287, -0.208345, -2.48053, -0.748245, -0.318397, -2.43529, 0.41995, -0.304223, -2.50807, 0.41995, -0.299565, -2.53069, 0.429712, -0.298654, -2.53119, 0.439113, -0.296123, -2.53217, 0.447609, -0.291871, -2.53414, 0.326306, -0.0552644, -2.55036, 0, 0.157955, -2.51496, 0, 0.187923, -2.5002, 0.71227, 0.172534, -2.5002, 0.588075, 0.540858, -0.899937, 0.612841, 0.523343, -0.899937, 0.435497, -0.288429, -2.5361, 0.41995, -0.217558, -2.56905, 0.459902, -0.247121, -2.55528, 0.455202, -0.222418, -2.56659, 0.447609, -0.216748, -2.56905, 0.439113, -0.212597, -2.57102, 0.429712, -0.210066, -2.57249, 0.41995, -0.209155, -2.57249, 0.560777, 0.594416, -0.446512, 0.589882, 0.580748, 0.399848, 0.616095, 0.565663, 0.383127, 0.845323, 0.175065, 1.72521, 0.556258, 0.576294, -0.634866, 0.860147, 0.115635, 1.8093, -0.918177, -0.248235, -0.718469, -0.835561, -0.433409, -0.718469, -0.762527, -0.345935, 2.2524, -0.793259, -0.357477, 2.09503, -0.805371, -0.36102, 1.99815, -0.882202, -0.240135, 1.22998, 0.799948, -0.269698, 2.32518, 0.785485, -0.224038, 2.426, 0.773554, -0.229201, 2.42551, 0.83538, 0.0955886, 2.06749, 0.854362, -0.11024, 1.92094, 0.805552, 0.0567111, 2.33108, 0.83538, -0.230011, 2.08716, 0.805552, -0.241046, 2.33551, -0.918177, 0.158258, -0.718961, -0.920889, 0.182962, -0.924035, -0.921612, -0.148915, -0.956493, -0.922516, -0.081284, -1.04993, -0.923058, -0.0398754, -1.19402, -0.92342, -0.0347119, -1.34303, -0.899196, 0.150058, -1.76302, -0.914923, -0.0651863, -1.49647, -0.80049, -0.174327, -2.52381, -0.455383, -0.286302, -2.53709, -0.44779, -0.291871, -2.53414, -0.439293, -0.296123, -2.53217, -0.429893, -0.298654, -2.53119, -0.420131, -0.299565, -2.53069, -0.420131, -0.304223, -2.50807, -0.326487, -0.0552644, -2.55036, -0.742822, 0.148539, -2.51446, -0.712451, 0.172534, -2.5002, -0.673402, 0.189846, -2.43381, -0.588255, 0.540858, -0.899937, 0.673222, 0.189846, -2.43381, -0.435678, -0.288429, -2.5361, -0.420131, -0.217558, -2.56905, -0.429893, -0.210066, -2.57249, -0.420131, -0.209155, -2.57249, -0.560958, 0.594416, -0.446512, 0, 0.594416, -0.380122, 0.560235, 0.587025, 0.405257, 0.242425, 0.527089, 1.81619, 0.266468, 0.520609, 1.81668, 0.813325, 0.14945, 2.06454, -0.556438, 0.576294, -0.634866, -0.883649, 0.132239, 1.43899, -0.883649, -0.0234739, 1.42128, -0.773735, -0.229201, 2.42551, -0.785666, -0.224038, 2.426, -0.800129, -0.269698, 2.32518, -0.850566, -0.233149, 1.96175, 0.790547, -0.211483, 2.426, 0.770842, -0.207737, 2.43829, 0.7703, -0.209054, 2.43829, 0.769396, -0.209357, 2.43829, 0.783497, 0.110674, 2.3301, 0.805552, -0.223633, 2.33551, 0.768492, 0.0770611, 2.43731, 0.790547, 0.0238069, 2.43534, -0.899376, 0.243101, -0.967804, -0.922516, 0.188935, -1.16107, -0.923058, 0.183873, -1.25009, -0.92342, 0.178406, -1.34549, -0.914923, 0.175267, -1.49647, -0.902992, 0.165751, -1.69761, -0.881118, 0.219612, -1.70007, -0.877141, 0.202704, -1.76744, -0.793621, 0.0418283, -2.5066, -0.80049, -0.0410903, -2.51348, -0.787655, -0.0511134, -2.54348, -0.780785, -0.0931295, -2.55528, -0.466229, -0.237098, -2.55971, -0.468941, -0.245501, -2.55577, -0.470026, -0.254309, -2.55184, -0.468941, -0.263118, -2.54741, -0.466229, -0.271622, -2.54348, -0.461529, -0.279418, -2.54004, -0.460083, -0.247121, -2.55528, -0.718959, 0.183367, -2.4343, -0.836104, 0.262944, -1.6327, -0.613022, 0.523343, -0.899937, -0.613564, 0.534379, -0.814367, -0.586628, 0.563435, -0.716502, -0.455383, -0.222418, -2.56659, -0.44779, -0.216748, -2.56905, -0.439293, -0.212597, -2.57102, -0.588255, 0.586215, -0.44848, -0.590063, 0.580748, 0.399848, -0.560415, 0.587025, 0.405257, -0.242606, 0.527089, 1.81619, 0.714982, 0.0991322, 2.43829, -0.867378, -0.0144632, 1.73209, -0.867378, 0.12171, 1.72717, -0.861594, 0.185189, 1.44489, -0.860328, -0.0476711, 1.85356, -0.769577, -0.209357, 2.43829, -0.770481, -0.209054, 2.43829, -0.771023, -0.207737, 2.43829, -0.790728, -0.211483, 2.426, -0.805733, -0.241046, 2.33551, -0.835561, -0.230011, 2.08716, -0.805733, 0.0567111, 2.33108, -0.854543, -0.11024, 1.92094, 0.770842, 0.0198584, 2.44714, 0.706485, -0.0757156, 2.45157, 0.701423, -0.08503, 2.45157, 0.694734, -0.0932308, 2.45157, 0.686599, -0.0999129, 2.45157, 0.677199, -0.104975, 2.45157, 0.667075, -0.108012, 2.45157, 0.656409, -0.109025, 2.45157, 0.711004, 0.0793896, 2.4496, 0.753307, 0.0619758, 2.44862, -0.629112, 0.554121, 0.369849, -0.900642, 0.242392, -1.18222, -0.901184, 0.237633, -1.26337, -0.901546, 0.23247, -1.34599, -0.892868, 0.229736, -1.49647, -0.906969, 0.17304, -1.62975, -0.884914, 0.226193, -1.6322, -0.611938, 0.547642, -0.710109, -0.611395, 0.554425, -0.626997, -0.609045, 0.566574, -0.448971, -0.616276, 0.565663, 0.383127, -0.813506, 0.14945, 2.06454, -0.266649, 0.520609, 1.81668, -0.715162, 0.0991322, 2.43829, -0.845504, 0.175065, 1.72521, -0.860328, 0.115635, 1.8093, -0.835561, 0.0955886, 2.06749, -0.656771, -0.109025, 2.45157, -0.667256, -0.108012, 2.45157, -0.67738, -0.104975, 2.45157, -0.68678, -0.0999129, 2.45157, -0.694915, -0.0932308, 2.45157, -0.701604, -0.08503, 2.45157, -0.706666, -0.0757156, 2.45157, -0.790728, 0.0238069, 2.43534, -0.771023, 0.0198584, 2.44714, -0.805733, -0.223633, 2.33551, -0.783678, 0.110674, 2.3301, -0.768673, 0.0770611, 2.43731, 0.710643, -0.0549607, 2.45157, 0.709558, -0.06549, 2.45157, -0.711185, 0.0793896, 2.4496, 0.656409, -0.000896543, 2.45157, 0.667075, -0.00190899, 2.45157, 0.677199, -0.00504756, 2.45157, 0.686599, -0.0100085, 2.45157, 0.694734, -0.0166906, 2.45157, 0.701423, -0.0248913, 2.45157, 0.706485, -0.034307, 2.45157, 0.709558, -0.0444313, 2.45157, -0.709739, -0.06549, 2.45157, -0.710824, -0.0549607, 2.45157, -0.753488, 0.0619758, 2.44862, -0.701604, -0.0248913, 2.45157, -0.694915, -0.0166906, 2.45157, -0.68678, -0.0100085, 2.45157, -0.67738, -0.00504756, 2.45157, -0.667256, -0.00190899, 2.45157, -0.656771, -0.000896543, 2.45157, -0.709739, -0.0444313, 2.45157, -0.706666, -0.034307, 2.45157)

[sub_resource type="SphereShape3D" id="SphereShape3D_yvtuk"]
radius = 2.404

[node name="Toreto" type="VehicleBody3D"]
collision_mask = 507
mass = 200.0
physics_material_override = ExtResource("1_xsx2t")
gravity_scale = 3.0
center_of_mass_mode = 1
center_of_mass = Vector3(0, -1, 0)
script = ExtResource("2_c0lmv")

[node name="ToretoBody" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0652078)
mesh = ExtResource("1_yvtuk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0652078)
shape = SubResource("ConvexPolygonShape3D_ka8i3")

[node name="wheel_1" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.67, -0.392661, 1.55234)
use_as_steering = true
wheel_roll_influence = 1.5
wheel_radius = 0.355
wheel_friction_slip = 10.0
suspension_stiffness = 150.0
suspension_max_force = 100000.0
damping_compression = 10.0
damping_relaxation = 10.0

[node name="ToretoWheel" type="MeshInstance3D" parent="wheel_1"]
mesh = ExtResource("2_xsx2t")
skeleton = NodePath("../..")

[node name="wheel_2" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.670348, -0.393059, 1.55208)
use_as_steering = true
wheel_roll_influence = 1.5
wheel_radius = 0.355
wheel_friction_slip = 10.0
suspension_stiffness = 150.0
suspension_max_force = 100000.0
damping_compression = 10.0
damping_relaxation = 10.0

[node name="ToretoWheel" type="MeshInstance3D" parent="wheel_2"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
mesh = ExtResource("2_xsx2t")
skeleton = NodePath("../..")

[node name="wheel_3" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.67, -0.40586, -1.37283)
use_as_traction = true
wheel_roll_influence = 1.5
wheel_radius = 0.405
wheel_friction_slip = 10.0
suspension_stiffness = 150.0
suspension_max_force = 100000.0
damping_compression = 10.0
damping_relaxation = 10.0

[node name="ToretoRearWheel" type="MeshInstance3D" parent="wheel_3"]
transform = Transform3D(1.17, 0, 0, 0, 1.17, 0, 0, 0, 1.17, 0, 0, 0)
mesh = ExtResource("3_c0lmv")
skeleton = NodePath("../..")

[node name="wheel_4" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.670348, -0.40586, -1.37283)
use_as_traction = true
wheel_roll_influence = 1.5
wheel_radius = 0.405
wheel_friction_slip = 10.0
suspension_stiffness = 150.0
suspension_max_force = 100000.0
damping_compression = 10.0
damping_relaxation = 10.0

[node name="ToretoRearWheel" type="MeshInstance3D" parent="wheel_4"]
transform = Transform3D(-1.17, 0, -1.76665e-07, 0, 1.17, 0, 1.76665e-07, 0, -1.17, 0, 0, 0)
mesh = ExtResource("3_c0lmv")
skeleton = NodePath("../..")

[node name="checkpoint_sensor" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.265052)
collision_layer = 0
collision_mask = 128

[node name="CollisionShape3D" type="CollisionShape3D" parent="checkpoint_sensor"]
shape = SubResource("SphereShape3D_yvtuk")
debug_color = Color(0.941176, 0.890196, 1, 0.615686)

[node name="RaceHud" parent="." instance=ExtResource("6_lwgyu")]

[connection signal="area_entered" from="checkpoint_sensor" to="." method="_on_checkpoint_sensor_area_entered"]
